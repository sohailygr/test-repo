pipeline {
    agent any

    stages {
        stage('run on branch true'){
            when {
                    beforeAgent true
                    expression { env.BRANCH_IS_PRIMARY }
                }
             steps {
                exho 'This stage runs on main branch'
}
}
        stage('Run on test1 Branch') {
            when {
                expression { env.BRANCH_NAME == 'test1' }
            }
            steps {
                echo 'This stage runs only on the test1 branch'
                // Add your stage-specific steps here
            }
        }

        // Add more stages as needed
    }

    // Add post section or other pipeline configurations if necessary
}
